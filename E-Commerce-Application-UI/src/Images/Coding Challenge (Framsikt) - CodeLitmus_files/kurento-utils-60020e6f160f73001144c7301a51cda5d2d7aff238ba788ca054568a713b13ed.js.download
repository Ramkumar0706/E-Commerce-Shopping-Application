!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;(n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).kurentoUtils=e()}}(function(){var e,n,t;return function(){function e(n,t,i){function r(o,a){if(!t[o]){if(!n[o]){var d="function"==typeof require&&require;if(!a&&d)return d(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[o]={exports:{}};n[o][0].call(u.exports,function(e){var t;return r(n[o][1][e]||e)},u,u.exports,e,n,t,i)}return t[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}return e}()({1:[function(e,n,t){function i(e){var n=document.createElement("script");n.src=e;var t=document.querySelector("script");t.parentNode.insertBefore(n,t)}function r(){"IE"===O.name&&i("https://cdn.temasys.io/adapterjs/0.15.x/adapter.debug.js")}function s(e){e&&T.error(e)}function o(e){e.stop&&e.stop()}function a(e){e.getTracks().forEach(o)}function d(e,n){function t(e,n){"undefined"!=typeof AdapterJS&&"IE"===AdapterJS.webrtcDetectedBrowser&&AdapterJS.webrtcDetectedVersion>=9?n.onsignalingstatechange=e:n.addEventListener("signalingstatechange",e)}var i=[],r;return t(function(){if("stable"===e.signalingState)for(;i.length;){var n=i.shift();e.addIceCandidate(n.candidate,n.callback,n.callback)}},e),function(t,r){switch(r=r||n,e.signalingState){case"closed":r(new Error("PeerConnection object is closed"));break;case"stable":if(e.remoteDescription){e.addIceCandidate(t,r,r);break}default:i.push({candidate:t,callback:r})}}}function c(e){var n=e.indexOf("a=ssrc-group:FID");return n>0?e.slice(0,n):e}function u(e){var n=e.getVideoTracks();if(!n.length)return T.warn("No video tracks available in the video stream"),"";var t=["a=x-google-flag:conference","a=ssrc-group:SIM 1 2 3","a=ssrc:1 cname:localVideo","a=ssrc:1 msid:"+e.id+" "+n[0].id,"a=ssrc:1 mslabel:"+e.id,"a=ssrc:1 label:"+n[0].id,"a=ssrc:2 cname:localVideo","a=ssrc:2 msid:"+e.id+" "+n[0].id,"a=ssrc:2 mslabel:"+e.id,"a=ssrc:2 label:"+n[0].id,"a=ssrc:3 cname:localVideo","a=ssrc:3 msid:"+e.id+" "+n[0].id,"a=ssrc:3 mslabel:"+e.id,"a=ssrc:3 label:"+n[0].id];return t.push(""),t.join("\n")}function f(e){for(var n=(new Date).getTime(),t=0;t<1e7&&!((new Date).getTime()-n>e);t++);}function p(e,n){"undefined"!=typeof AdapterJS&&"IE"===AdapterJS.webrtcDetectedBrowser&&AdapterJS.webrtcDetectedVersion>=9?n.onicecandidate=e:n.addEventListener("icecandidate",e)}function l(e,n,t){function i(){if(h){h.pause();var e=S.getRemoteStreams()[0];h.srcObject=e,T.debug("Remote stream:",e),"undefined"!=typeof AdapterJS&&"IE"===AdapterJS.webrtcDetectedBrowser&&AdapterJS.webrtcDetectedVersion>=9?h=attachMediaStream(h,e):h.load()}}function r(e){return V&&("Chrome"===O.name||"Chromium"===O.name?(T.debug("Adding multicast info"),e=new RTCSessionDescription({type:e.type,sdp:c(e.sdp)+u(g)})):T.warn("Simulcast is only available in Chrome browser.")),e}function o(){"closed"===S.signalingState&&t('The peer connection object is in "closed" state. This is most likely due to an invocation of the dispose method before accepting in the dialogue'),g&&m&&a.showLocalVideo(),g&&g.getTracks().forEach(function(e){S.addTrack(e,g)}),w&&w.getTracks().forEach(function(e){S.addTrack(e,w)});var n=_.getBrowser();"sendonly"!==e||"Chrome"!==n.name&&"Chromium"!==n.name||39!==n.major||(e="sendrecv"),t()}if(!(this instanceof l))return new l(e,n,t);l.super_.call(this),n instanceof Function&&(t=n,n=undefined),n=n||{},t=(t||s).bind(this);var a=this,m=n.localVideo,h=n.remoteVideo,g=n.videoStream,w=n.audioStream,v=n.mediaConstraints,b=n.connectionConstraints,S=n.peerConnection,x=n.sendSource||"webcam",P=n.dataChannelConfig,D=n.dataChannels||!1,R,B=k(),U=A({iceServers:y()},n.configuration),N=n.onicecandidate;N&&this.on("icecandidate",N);var I=n.oncandidategatheringdone;I&&this.on("candidategatheringdone",I);var V=n.simulcast,z=n.multistream,F=new C.Interop,G=[],J=!1,q;if(Object.defineProperties(this,{peerConnection:{get:function(){return S}},id:{value:n.id||B,writable:!1},remoteVideo:{get:function(){return h}},localVideo:{get:function(){return m}},dataChannel:{get:function(){return R}},currentFrame:{get:function(){if(h){if(h.readyState<h.HAVE_CURRENT_DATA)throw new Error("No video stream data available");var e=document.createElement("canvas");return e.width=h.videoWidth,e.height=h.videoHeight,e.getContext("2d").drawImage(h,0,0),e}}}}),!S&&(S=new RTCPeerConnection(U),D&&!R)){var W="WebRtcPeer-"+a.id,H=undefined;P&&(W=P.id||W,H=P.options),R=S.createDataChannel(W,H),P&&(R.onopen=P.onopen,R.onclose=P.onclose,R.onmessage=P.onmessage,R.onbufferedamountlow=P.onbufferedamountlow,R.onerror=P.onerror||s)}!S.getLocalStreams&&S.getSenders&&(S.getLocalStreams=function(){var e=new MediaStream;return S.getSenders().forEach(function(n){e.addTrack(n.track)}),[e]}),!S.getRemoteStreams&&S.getReceivers&&(S.getRemoteStreams=function(){var e=new MediaStream;return S.getReceivers().forEach(function(n){e.addTrack(n.track)}),[e]}),p(function(e){var n=e.candidate,t;E.listenerCount(a,"icecandidate")||E.listenerCount(a,"candidategatheringdone")?n?(t=z&&j?F.candidateToUnifiedPlan(n):n,"undefined"==typeof AdapterJS&&a.emit("icecandidate",t),J=!1):J||("undefined"!=typeof AdapterJS&&"IE"===AdapterJS.webrtcDetectedBrowser&&AdapterJS.webrtcDetectedVersion>=9?E.prototype.emit("candidategatheringdone",t):a.emit("candidategatheringdone"),J=!0):J||(G.push(n),n||(J=!0))},S),S.onaddstream=n.onaddstream,S.onnegotiationneeded=n.onnegotiationneeded,this.on("newListener",function(e,n){if("icecandidate"===e||"candidategatheringdone"===e)for(;G.length;){var t=G.shift();!t==("candidategatheringdone"===e)&&n(t)}});var X=d(S);if(this.addIceCandidate=function(e,n){var t;t=z&&j?F.candidateToPlanB(e):new RTCIceCandidate(e),T.debug("Remote ICE candidate received",e),n=(n||s).bind(this),X(t,n)},this.generateOffer=function(n){if(n=n.bind(this),"recvonly"===e){var t=!v||"boolean"!=typeof v.audio||v.audio,i=!v||"boolean"!=typeof v.video||v.video;t&&S.addTransceiver("audio",{direction:"recvonly"}),i&&S.addTransceiver("video",{direction:"recvonly"})}if("undefined"!=typeof AdapterJS&&"IE"===AdapterJS.webrtcDetectedBrowser&&AdapterJS.webrtcDetectedVersion>=9){var s=function(){f(1e3);var e=S.localDescription;T.debug("Local description set\n",e.sdp),z&&j&&(e=F.toUnifiedPlan(e),T.debug("offer::origPlanB->UnifiedPlan",M(e))),n(null,e.sdp,a.processAnswer.bind(a))},o=function(e){T.debug("Created SDP offer"),T.debug("Local description set\n",S.localDescription),S.setLocalDescription(e,s,n)};S.createOffer(o,n)}else S.createOffer().then(function(e){return T.debug("Created SDP offer"),e=r(e),S.setLocalDescription(e)}).then(function(){var e=S.localDescription;T.debug("Local description set\n",e.sdp),z&&j&&(e=F.toUnifiedPlan(e),T.debug("offer::origPlanB->UnifiedPlan",M(e))),n(null,e.sdp,a.processAnswer.bind(a))})["catch"](n)},this.getLocalSessionDescriptor=function(){return S.localDescription},this.getRemoteSessionDescriptor=function(){return S.remoteDescription},this.showLocalVideo=function(){m.srcObject=g,m.muted=!0,"undefined"!=typeof AdapterJS&&"IE"===AdapterJS.webrtcDetectedBrowser&&AdapterJS.webrtcDetectedVersion>=9&&(m=attachMediaStream(m,g))},this.send=function(e){R&&"open"===R.readyState?R.send(e):T.warn("Trying to send data over a non-existing or closed data channel")},this.processAnswer=function(e,n){n=(n||s).bind(this);var t=new RTCSessionDescription({type:"answer",sdp:e});if(z&&j){var r=F.toPlanB(t);T.debug("asnwer::planB",M(r)),t=r}if(T.debug("SDP answer received, setting remote description"),"closed"===S.signalingState)return n("PeerConnection is closed");S.setRemoteDescription(t,function(){i(),n()},n)},this.processOffer=function(e,n){n=n.bind(this);var t=new RTCSessionDescription({type:"offer",sdp:e});if(z&&j){var s=F.toPlanB(t);T.debug("offer::planB",M(s)),t=s}if(T.debug("SDP offer received, setting remote description"),"closed"===S.signalingState)return n("PeerConnection is closed");S.setRemoteDescription(t).then(function(){return i()}).then(function(){return S.createAnswer()}).then(function(e){return e=r(e),T.debug("Created SDP answer"),S.setLocalDescription(e)}).then(function(){var e=S.localDescription;z&&j&&(e=F.toUnifiedPlan(e),T.debug("answer::origPlanB->UnifiedPlan",M(e))),T.debug("Local description set\n",e.sdp),n(null,e.sdp)})["catch"](n)},"recvonly"===e||g||w)setTimeout(o,0);else{function $(e){e===undefined&&(e=L),"undefined"!=typeof AdapterJS&&"IE"===AdapterJS.webrtcDetectedBrowser&&AdapterJS.webrtcDetectedVersion>=9?navigator.getUserMedia(e,function(e){g=e,o()},t):navigator.mediaDevices.getUserMedia(e).then(function(e){g=e,o()})["catch"](t)}"webcam"===x?$(v):getScreenConstraints(x,function(e,n){if(e)return t(e);constraints=[v],constraints.unshift(n),$(A.apply(undefined,constraints))},B)}this.on("_dispose",function(){m&&(m.pause(),m.srcObject=null,"undefined"==typeof AdapterJS&&m.load(),m.muted=!1),h&&(h.pause(),h.srcObject=null,"undefined"==typeof AdapterJS&&h.load()),a.removeAllListeners(),window.cancelChooseDesktopMedia!==undefined&&window.cancelChooseDesktopMedia(B)})}function m(e){var n="get"+e+"Tracks";return{enumerable:!0,get:function(){if(this.peerConnection){var e=this.peerConnection.getLocalStreams();if(e.length){for(var t=0,i;i=e[t];t++)for(var r=i[n](),s=0,o;o=r[s];s++)if(!o.enabled)return!1;return!0}}},set:function(e){function t(n){n.enabled=e}this.peerConnection.getLocalStreams().forEach(function(e){e[n]().forEach(t)})}}}function h(e,n){if(!(this instanceof h))return new h(e,n);h.super_.call(this,"recvonly",e,n)}function g(e,n){if(!(this instanceof g))return new g(e,n);g.super_.call(this,"sendonly",e,n)}function w(e,n){if(!(this instanceof w))return new w(e,n);w.super_.call(this,"sendrecv",e,n)}function v(e,n){return x(e,n)}var y=e("freeice"),b=e("inherits"),S=e("ua-parser-js"),k=e("uuid/v4"),x=e("hark"),E=e("events").EventEmitter,A=e("merge").recursive.bind(undefined,!0),C=e("sdp-translator"),T=window.Logger||console;try{e("kurento-browser-extensions")}catch(D){"undefined"==typeof getScreenConstraints&&(T.warn("screen sharing is not available"),getScreenConstraints=function e(n,t){t(new Error("This library is not enabled for screen sharing"))})}var L={audio:!0,video:{width:640,framerate:15}},P,_=new S(window&&window.navigator?window.navigator.userAgent:""),O=_.getBrowser();r();var j=!1;"Chrome"!==O.name&&"Chromium"!==O.name||(T.debug(O.name+": using SDP PlanB"),j=!0);var M=function(e){return null==e?"":"type: "+e.type+"\r\n"+e.sdp};b(l,E),Object.defineProperties(l.prototype,{enabled:{enumerable:!0,get:function(){return this.audioEnabled&&this.videoEnabled},set:function(e){this.audioEnabled=this.videoEnabled=e}},audioEnabled:m("Audio"),videoEnabled:m("Video")}),l.prototype.getLocalStream=function(e){if(this.peerConnection)return this.peerConnection.getLocalStreams()[e||0]},l.prototype.getRemoteStream=function(e){if(this.peerConnection)return this.peerConnection.getRemoteStreams()[e||0]},l.prototype.dispose=function(){T.debug("Disposing WebRtcPeer");var e=this.peerConnection,n=this.dataChannel;try{if(n){if("closed"===n.signalingState)return;n.close()}if(e){if("closed"===e.signalingState)return;e.getLocalStreams().forEach(a),e.close()}}catch(t){T.warn("Exception disposing webrtc peer "+t)}"undefined"==typeof AdapterJS&&this.emit("_dispose")},b(h,l),b(g,l),b(w,l),t.bufferizeCandidates=d,t.WebRtcPeerRecvonly=h,t.WebRtcPeerSendonly=g,t.WebRtcPeerSendrecv=w,t.hark=v},{events:4,freeice:5,hark:8,inherits:9,"kurento-browser-extensions":10,merge:11,"sdp-translator":18,"ua-parser-js":21,"uuid/v4":24}],2:[function(e,n,t){window.addEventListener&&(n.exports=e("./index"))},{"./index":3}],3:[function(e,n,t){var i=e("./WebRtcPeer");t.WebRtcPeer=i},{"./WebRtcPeer":1}],4:[function(e,n,t){function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=S(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined}function r(e){return e._maxListeners===undefined?i.defaultMaxListeners:e._maxListeners}function s(e,n,t){if(n)e.call(t);else for(var i=e.length,r=g(e,i),s=0;s<i;++s)r[s].call(t)}function o(e,n,t,i){if(n)e.call(t,i);else for(var r=e.length,s=g(e,r),o=0;o<r;++o)s[o].call(t,i)}function a(e,n,t,i,r){if(n)e.call(t,i,r);else for(var s=e.length,o=g(e,s),a=0;a<s;++a)o[a].call(t,i,r)}function d(e,n,t,i,r,s){if(n)e.call(t,i,r,s);else for(var o=e.length,a=g(e,o),d=0;d<o;++d)a[d].call(t,i,r,s)}function c(e,n,t,i){if(n)e.apply(t,i);else for(var r=e.length,s=g(e,r),o=0;o<r;++o)s[o].apply(t,i)}function u(e,n,t,i){var s,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",n,t.listener?t.listener:t),o=e._events),a=o[n]):(o=e._events=S(null),e._eventsCount=0),a){if("function"==typeof a?a=o[n]=i?[t,a]:[a,t]:i?a.unshift(t):a.push(t),!a.warned&&(s=r(e))&&s>0&&a.length>s){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(n)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');d.name="MaxListenersExceededWarning",d.emitter=e,d.type=n,d.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",d.name,d.message)}}else a=o[n]=t,++e._eventsCount;return e}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),n=0;n<e.length;++n)e[n]=arguments[n];this.listener.apply(this.target,e)}}function p(e,n,t){var i={fired:!1,wrapFn:undefined,target:e,type:n,listener:t},r=x.call(f,i);return r.listener=t,i.wrapFn=r,r}function l(e,n,t){var i=e._events;if(!i)return[];var r=i[n];return r?"function"==typeof r?t?[r.listener||r]:[r]:t?w(r):g(r,r.length):[]}function m(e){var n=this._events;if(n){var t=n[e];if("function"==typeof t)return 1;if(t)return t.length}return 0}function h(e,n){for(var t=n,i=t+1,r=e.length;i<r;t+=1,i+=1)e[t]=e[i];e.pop()}function g(e,n){for(var t=new Array(n),i=0;i<n;++i)t[i]=e[i];return t}function w(e){for(var n=new Array(e.length),t=0;t<n.length;++t)n[t]=e[t].listener||e[t];return n}function v(e){var n=function(){};return n.prototype=e,new n}function y(e){var n=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return t}function b(e){var n=this;return function(){return n.apply(e,arguments)}}
// Copyright Joyent, Inc. and other Node contributors.
// The above copyright notice and this permission notice shall be included
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
var S=Object.create||v,k=Object.keys||y,x=Function.prototype.bind||b;n.exports=i,i.EventEmitter=i,i.prototype._events=undefined,i.prototype._maxListeners=undefined;var E=10,A;try{var C={};Object.defineProperty&&Object.defineProperty(C,"x",{value:0}),A=0===C.x}catch(T){A=!1}A?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');E=e}}):i.defaultMaxListeners=E,i.prototype.setMaxListeners=function L(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},i.prototype.getMaxListeners=function P(){return r(this)},i.prototype.emit=function _(e){var n,t,i,r,u,f,p="error"===e;if(f=this._events)p=p&&null==f.error;else if(!p)return!1;if(p){if(arguments.length>1&&(n=arguments[1]),n instanceof Error)throw n;var l=new Error('Unhandled "error" event. ('+n+")");throw l.context=n,l}if(!(t=f[e]))return!1;var m="function"==typeof t;switch(i=arguments.length){case 1:s(t,m,this);break;case 2:o(t,m,this,arguments[1]);break;case 3:a(t,m,this,arguments[1],arguments[2]);break;case 4:d(t,m,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),u=1;u<i;u++)r[u-1]=arguments[u];c(t,m,this,r)}return!0},i.prototype.addListener=function O(e,n){return u(this,e,n,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function j(e,n){return u(this,e,n,!0)},i.prototype.once=function M(e,n){if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,n)),this},i.prototype.prependOnceListener=function D(e,n){if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,n)),this},i.prototype.removeListener=function R(e,n){var t,i,r,s,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(t=i[e]))return this;if(t===n||t.listener===n)0==--this._eventsCount?this._events=S(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,t.listener||n));else if("function"!=typeof t){for(r=-1,s=t.length-1;s>=0;s--)if(t[s]===n||t[s].listener===n){o=t[s].listener,r=s;break}if(r<0)return this;0===r?t.shift():h(t,r),1===t.length&&(i[e]=t[0]),i.removeListener&&this.emit("removeListener",e,o||n)}return this},i.prototype.removeAllListeners=function B(e){var n,t,i;if(!(t=this._events))return this;if(!t.removeListener)return 0===arguments.length?(this._events=S(null),this._eventsCount=0):t[e]&&(0==--this._eventsCount?this._events=S(null):delete t[e]),this;if(0===arguments.length){var r=k(t),s;for(i=0;i<r.length;++i)"removeListener"!==(s=r[i])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=S(null),this._eventsCount=0,this}if("function"==typeof(n=t[e]))this.removeListener(e,n);else if(n)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this},i.prototype.listeners=function U(e){return l(this,e,!0)},i.prototype.rawListeners=function N(e){return l(this,e,!1)},i.listenerCount=function(e,n){return"function"==typeof e.listenerCount?e.listenerCount(n):m.call(e,n)},i.prototype.listenerCount=m,i.prototype.eventNames=function I(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],5:[function(e,n,t){"use strict";var i=e("normalice"),r=function(n){function t(e,n){for(var t=[],s=[].concat(r[e]),o;s.length&&t.length<n;)o=Math.random()*s.length|0,t=t.concat(s.splice(o,1));return t.map(function(n){return"string"==typeof n||n instanceof String?i(e+":"+n):n})}var r={stun:(n||{}).stun||e("./stun.json"),turn:(n||{}).turn||e("./turn.json")},s=(n||{}).stunCount||2,o=(n||{}).turnCount||0,a;return a=[].concat(t("stun",s)),o&&(a=a.concat(t("turn",o))),a};n.exports=r},{"./stun.json":6,"./turn.json":7,normalice:12}],6:[function(e,n,t){n.exports=["stun.l.google.com:19302","stun1.l.google.com:19302","stun2.l.google.com:19302","stun3.l.google.com:19302","stun4.l.google.com:19302","stun.ekiga.net","stun.ideasip.com","stun.schlund.de","stun.stunprotocol.org:3478","stun.voiparound.com","stun.voipbuster.com","stun.voipstunt.com","stun.voxgratia.org"]},{}],7:[function(e,n,t){n.exports=[]},{}],8:[function(e,n,t){function i(e,n){var t=-Infinity;e.getFloatFrequencyData(n);for(var i=4,r=n.length;i<r;i++)n[i]>t&&n[i]<0&&(t=n[i]);return t}var r=e("wildemitter"),s;"undefined"!=typeof window&&(s=window.AudioContext||window.webkitAudioContext);var o=null;n.exports=function(e,n){var t=new r;if(!s)return t;var n,a=(n=n||{}).smoothing||.1,d=n.interval||50,c=n.threshold,u=n.play,f=n.history||10,p=!0,l,m,h;o=n.audioContext||o||new s,(h=o.createAnalyser()).fftSize=512,h.smoothingTimeConstant=a,m=new Float32Array(h.frequencyBinCount),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(l=o.createMediaElementSource(e),void 0===u&&(u=!0),c=c||-50):(l=o.createMediaStreamSource(e),c=c||-50),l.connect(h),u&&h.connect(o.destination),t.speaking=!1,t.suspend=function(){return o.suspend()},t.resume=function(){return o.resume()},Object.defineProperty(t,"state",{get:function(){return o.state}}),o.onstatechange=function(){t.emit("state_change",o.state)},t.setThreshold=function(e){c=e},t.setInterval=function(e){d=e},t.stop=function(){p=!1,t.emit("volume_change",-100,c),t.speaking&&(t.speaking=!1,t.emit("stopped_speaking")),h.disconnect(),l.disconnect()},t.speakingHistory=[];for(var g=0;g<f;g++)t.speakingHistory.push(0);var w=function(){setTimeout(function(){if(p){var e=i(h,m);t.emit("volume_change",e,c);var n=0;if(e>c&&!t.speaking){for(var r=t.speakingHistory.length-3;r<t.speakingHistory.length;r++)n+=t.speakingHistory[r];n>=2&&(t.speaking=!0,t.emit("speaking"))}else if(e<c&&t.speaking){for(var r=0;r<t.speakingHistory.length;r++)n+=t.speakingHistory[r];0==n&&(t.speaking=!1,t.emit("stopped_speaking"))}t.speakingHistory.shift(),t.speakingHistory.push(0+(e>c)),w()}},d)};return w(),t}},{wildemitter:25}],9:[function(e,n,t){"function"==typeof Object.create?n.exports=function i(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function r(e,n){if(n){e.super_=n;var t=function(){};t.prototype=n.prototype,e.prototype=new t,e.prototype.constructor=e}}},{}],10:[function(e,n,t){},{}],11:[function(e,n,t){!function(e){function t(e,n){if("object"!==r(e))return n;for(var i in n)"object"===r(e[i])&&"object"===r(n[i])?e[i]=t(e[i],n[i]):e[i]=n[i];return e}function i(e,n,i){var o=i[0],a=i.length;(e||"object"!==r(o))&&(o={});for(var d=0;d<a;++d){var c=i[d],u;if("object"===r(c))for(var f in c)if("__proto__"!==f){var p=e?s.clone(c[f]):c[f];o[f]=n?t(o[f],p):p}}return o}function r(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var s=function(e){return i(!0===e,!1,arguments)},o="merge";s.recursive=function(e){return i(!0===e,!0,arguments)},s.clone=function(e){var n=e,t=r(e),i,o;if("array"===t)for(n=[],o=e.length,i=0;i<o;++i)n[i]=s.clone(e[i]);else if("object"===t)for(i in n={},e)n[i]=s.clone(e[i]);return n},e?n.exports=s:window[o]=s}("object"==typeof n&&n&&"object"==typeof n.exports&&n.exports)},{}],12:[function(e,n,t){var i=["stun:","turn:"];n.exports=function(e){var n=(e||{}).url||e,t,r,s={};return"string"==typeof n||n instanceof String?(n=n.trim(),(t=i[i.indexOf(n.slice(0,5))])?(r=(n=n.slice(5)).split("@"),s.username=e.username,s.credential=e.credential,r.length>1&&(n=r[1],r=r[0].split(":"),s.username=r[0],s.credential=(e||{}).credential||r[1]||""),s.url=t+n,s.urls=[s.url],s):e):e}},{}],13:[function(e,n,t){var i=n.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=null!=e.raddr?" raddr %s rport %d":"%v%v",n+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(n+=" generation %d"),n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{push:"invalid",names:["value"]}]};Object.keys(i).forEach(function(e){var n;i[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],14:[function(e,n,t){var i=e("./parser"),r=e("./writer");t.write=r,t.parse=i.parse,t.parseFmtpConfig=i.parseFmtpConfig,t.parsePayloads=i.parsePayloads,t.parseRemoteCandidates=i.parseRemoteCandidates},{"./parser":15,"./writer":16}],15:[function(e,n,t){var i=function(e){return String(Number(e))===e?Number(e):e},r=function(e,n,t,r){if(r&&!t)n[r]=i(e[1]);else for(var s=0;s<t.length;s+=1)null!=e[s+1]&&(n[t[s]]=i(e[s+1]))},s=function(e,n,t){var i=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:i&&!n[e.name]&&(n[e.name]={});var s=e.push?{}:i?n[e.name]:n;r(t.match(e.reg),s,e.names,e.name),e.push&&n[e.push].push(s)},o=e("./grammar"),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var n={},t=[],i=n;return e.split(/(\r\n|\r|\n)/).filter(a).forEach(function(e){var n=e[0],r=e.slice(2);"m"===n&&(t.push({rtp:[],fmtp:[]}),i=t[t.length-1]);for(var a=0;a<(o[n]||[]).length;a+=1){var d=o[n][a];if(d.reg.test(r))return s(d,i,r)}}),n.media=t,n};var d=function(e,n){var t=n.split("=");return 2===t.length&&(e[t[0]]=i(t[1])),e};t.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(d,{})},t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var n=[],t=e.split(" ").map(i),r=0;r<t.length;r+=3)n.push({component:t[r],ip:t[r+1],port:t[r+2]});return n}},{"./grammar":13}],16:[function(e,n,t){var i=e("./grammar"),r=/%[sdv%]/g,s=function(e){var n=1,t=arguments,i=t.length;return e.replace(r,function(e){if(n>=i)return e;var r=t[n];switch(n+=1,e){case"%%":return"%";case"%s":return String(r);case"%d":return Number(r);case"%v":return""}})},o=function(e,n,t){var i,r=[e+"="+(n.format instanceof Function?n.format(n.push?t:t[n.name]):n.format)];if(n.names)for(var o=0;o<n.names.length;o+=1){var a=n.names[o];n.name?r.push(t[n.name][a]):r.push(t[n.names[o]])}else r.push(t[n.name]);return s.apply(null,r)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],d=["i","c","b","a"];n.exports=function(e,n){n=n||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var t=n.outerOrder||a,r=n.innerOrder||d,s=[];return t.forEach(function(n){i[n].forEach(function(t){t.name in e&&null!=e[t.name]?s.push(o(n,t,e)):t.push in e&&null!=e[t.push]&&e[t.push].forEach(function(e){s.push(o(n,t,e))})})}),e.media.forEach(function(e){s.push(o("m",i.m[0],e)),r.forEach(function(n){i[n].forEach(function(t){t.name in e&&null!=e[t.name]?s.push(o(n,t,e)):t.push in e&&null!=e[t.push]&&e[t.push].forEach(function(e){s.push(o(n,t,e))})})})}),s.join("\r\n")+"\r\n"}},{"./grammar":13}],17:[function(e,n,t){
/* Copyright @ 2015 Atlassian Pty Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.exports=function i(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var n=0,t=this.length;n<t;n++)if(this[n]instanceof Array&&e[n]instanceof Array){if(!i.apply(this[n],[e[n]]))return!1}else if(this[n]!=e[n])return!1;return!0}},{}],18:[function(e,n,t){
/* Copyright @ 2015 Atlassian Pty Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
t.Interop=e("./interop")},{"./interop":19}],19:[function(e,n,t){
/* Copyright @ 2015 Atlassian Pty Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";function i(){this.cache={mlB2UMap:{},mlU2BMap:{}}}function r(e){"undefined"!=typeof e.setup&&("active"===e.setup?e.setup="passive":"passive"===e.setup&&(e.setup="active"))}var s=e("./transform"),o=e("./array-equals");n.exports=i,i.prototype.candidateToUnifiedPlan=function(e){var n=new RTCIceCandidate(e);return n.sdpMLineIndex=this.cache.mlB2UMap[n.sdpMLineIndex],n},i.prototype.candidateToPlanB=function(e){var n=new RTCIceCandidate(e);if(0===n.sdpMid.indexOf("audio"))n.sdpMid="audio";else{if(0!==n.sdpMid.indexOf("video"))throw new Error("candidate with "+n.sdpMid+" not allowed");n.sdpMid="video"}return n.sdpMLineIndex=this.cache.mlU2BMap[n.sdpMLineIndex],n},i.prototype.getFirstSendingIndexFromAnswer=function(e){if(!this.cache.answer)return null;var n=s.parse(this.cache.answer);if(n&&n.media&&Array.isArray(n.media))for(var t=0;t<n.media.length;t++)if(n.media[t].type==e&&(!n.media[t].direction||"sendrecv"===n.media[t].direction||"sendonly"===n.media[t].direction))return t;return null},i.prototype.toPlanB=function(e){var n=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var t=s.parse(e.sdp);if("undefined"==typeof t.media||!Array.isArray(t.media)||0===t.media.length)return console.warn("The description has no media."),e;if(t.media.length<=3&&t.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Unified Plan."),e;for(var i=e.sdp,r=!1,o=0;o<t.media.length;o++){var a;t.media[o].rtp.forEach(function(e){if("NULL"===e.codec){r=!0;var t=s.parse(n.cache.offer);e.codec=t.media[o].rtp[0].codec}})}r&&(i=s.write(t)),this.cache[e.type]=i;var d=t.media;t.media=[];var c={},u=[];d.forEach(function(e){if(("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");if("undefined"!=typeof c[e.type]&&"inactive"!==c[e.type].direction||(c[e.type]=e),e.protocol!=c[e.type].protocol)throw new Error("Cannot convert to Plan B because m-lines have different protocols and this library does not have support for that");if(e.payloads!=c[e.type].payloads)throw new Error("Cannot convert to Plan B because m-lines have different payloads and this library does not have support for that")}),d.forEach(function(e){if("application"===e.type)return t.media.push(e),void u.push(e.mid);"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(n){"object"!=typeof c[e.type].sources&&(c[e.type].sources={}),c[e.type].sources[n]=e.sources[n],"undefined"!=typeof e.msid&&(c[e.type].sources[n].msid=e.msid)}),"undefined"!=typeof e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&("undefined"!=typeof c[e.type].ssrcGroups&&Array.isArray(c[e.type].ssrcGroups)||(c[e.type].ssrcGroups=[]),c[e.type].ssrcGroups=c[e.type].ssrcGroups.concat(e.ssrcGroups)),c[e.type]===e&&(e.mid=e.type,delete e.bundleOnly,delete e.msid,e.type==d[0].type?(u.unshift(e.type),t.media.unshift(e)):(u.push(e.type),t.media.push(e)))}),"undefined"!=typeof t.groups&&t.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=u.join(" "),!0}),t.msidSemantic={semantic:"WMS",token:"*"};var f=s.write(t);return new RTCSessionDescription({type:e.type,sdp:f})},i.prototype.toUnifiedPlan=function(e){var n=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var t=s.parse(e.sdp);if("undefined"==typeof t.media||!Array.isArray(t.media)||0===t.media.length)return console.warn("The description has no media."),e;if(t.media.length>3||!t.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Plan B."),e;var i=[];t.media.forEach(function(e){i.push(e.mid)});var a=!1,d,c;if("undefined"!=typeof t.groups&&Array.isArray(t.groups)&&(a=t.groups.every(function(e){return"BUNDLE"!==e.type||o.apply(e.mids.sort(),[i.sort()])})),!a){var u=!1;if(t.media.forEach(function(e){"inactive"!==e.direction&&(u=!0)}),u)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.")}if("answer"===e.type)d="offer";else{if("offer"!==e.type)throw new Error("Type '"+e.type+"' not supported.");d="answer"}"undefined"!=typeof this.cache[d]&&(c=s.parse(this.cache[d]));var f={audio:{},video:{}},p={},l=0,m=0,h={},g,w,v,y,b={},S={},k={};if(t.media.forEach(function(t){if(("string"!=typeof t.rtcpMux||"rtcp-mux"!==t.rtcpMux)&&"inactive"!==t.direction)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"!==t.type){var i=t.sources,r=t.ssrcGroups,s=t.port;if("undefined"!=typeof t.candidates&&(g=void 0!==g?g.concat(t.candidates):t.candidates),void 0!==w&&"undefined"!=typeof t.iceUfrag&&w!=t.iceUfrag)throw new Error("Only BUNDLE supported, iceUfrag must be the same for all m-lines.\n\tLast iceUfrag: "+w+"\n\tNew iceUfrag: "+t.iceUfrag);if("undefined"!=typeof t.iceUfrag&&(w=t.iceUfrag),void 0!==v&&"undefined"!=typeof t.icePwd&&v!=t.icePwd)throw new Error("Only BUNDLE supported, icePwd must be the same for all m-lines.\n\tLast icePwd: "+v+"\n\tNew icePwd: "+t.icePwd);if("undefined"!=typeof t.icePwd&&(v=t.icePwd),void 0!==y&&"undefined"!=typeof t.fingerprint&&(y.type!=t.fingerprint.type||y.hash!=t.fingerprint.hash))throw new Error("Only BUNDLE supported, fingerprint must be the same for all m-lines.\n\tLast fingerprint: "+JSON.stringify(y)+"\n\tNew fingerprint: "+JSON.stringify(t.fingerprint));"undefined"!=typeof t.fingerprint&&(y=t.fingerprint),b[t.type]=t.payloads,S[t.type]=t.rtcpFb,k[t.type]=t.rtp;var o={};void 0!==r&&Array.isArray(r)&&r.forEach(function(e){"undefined"!=typeof e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(n){"undefined"==typeof o[n]&&(o[n]=[]),o[n].push(e)})});var a={};if("object"==typeof i)delete t.sources,delete t.ssrcGroups,delete t.candidates,delete t.iceUfrag,delete t.icePwd,delete t.fingerprint,delete t.port,delete t.mid,Object.keys(i).forEach(function(r){var d;"offer"!==e.type||i[r].msid?("undefined"!=typeof o[r]&&Array.isArray(o[r])&&o[r].some(function(e){return e.ssrcs.some(function(e){if("object"==typeof a[e])return d=a[e],!0})}),"object"==typeof d?(d.sources[r]=i[r],delete i[r].msid):(d=Object.create(t),a[r]=d,"undefined"!=typeof i[r].msid&&(d.msid=i[r].msid,delete i[r].msid),d.sources={},d.sources[r]=i[r],d.ssrcGroups=o[r],void 0!==c&&"undefined"!=typeof c.media&&Array.isArray(c.media)&&c.media.forEach(function(e){"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(n){n===r&&(d.mid=e.mid)})}),"undefined"==typeof d.mid&&(d.mid=[t.type,"-",r].join("")),d.candidates=g,d.iceUfrag=w,d.icePwd=v,d.fingerprint=y,d.port=s,p[d.mid]=d,h[m]=d.sources,n.cache.mlU2BMap[m]=l,"undefined"==typeof n.cache.mlB2UMap[l]&&(n.cache.mlB2UMap[l]=m),m++)):f[t.type][r]=i[r]});else{var d=t;d.candidates=g,d.iceUfrag=w,d.icePwd=v,d.fingerprint=y,d.port=s,p[d.mid]=d,n.cache.mlU2BMap[m]=l,"undefined"==typeof n.cache.mlB2UMap[l]&&(n.cache.mlB2UMap[l]=m)}l++}else p[t.mid]=t}),t.media=[],i=[],"answer"===e.type)for(var x=0;x<c.media.length;x++){var E=c.media[x];delete E.msid,delete E.sources,delete E.ssrcGroups,"undefined"==typeof h[x]?E.direction&&"sendrecv"!==E.direction?"sendonly"===E.direction&&(E.direction="inactive"):E.direction="recvonly":E.direction&&"sendrecv"!==E.direction?"recvonly"===E.direction&&(E.direction="sendonly"):E.direction="sendrecv",E.sources=h[x],E.candidates=g,E.iceUfrag=w,E.icePwd=v,E.fingerprint=y,E.rtp=k[E.type],E.payloads=b[E.type],E.rtcpFb=S[E.type],t.media.push(E),"string"==typeof E.mid&&i.push(E.mid)}else void 0!==c&&"undefined"!=typeof c.media&&Array.isArray(c.media)&&c.media.forEach(function(e){i.push(e.mid),"undefined"!=typeof p[e.mid]?t.media.push(p[e.mid]):(delete e.msid,delete e.sources,delete e.ssrcGroups,e.direction&&"sendrecv"!==e.direction||(e.direction="sendonly"),e.direction&&"recvonly"!==e.direction||(e.direction="inactive"),r(e),t.media.push(e))}),Object.keys(p).forEach(function(e){if(-1===i.indexOf(e))if(i.push(e),"recvonly"===p[e].direction){var n=!1;t.media.some(function(t){if(("sendrecv"===t.direction||"sendonly"===t.direction)&&t.type===p[e].type)return Object.keys(p[e].sources).forEach(function(n){t.sources[n]=p[e].sources[n]}),n=!0,!0}),n||t.media.push(p[e])}else t.media.push(p[e])});["audio","video"].forEach(function(e){if(t&&t.media&&Array.isArray(t.media)){var i=null;if(Object.keys(f[e]).length>0&&null===(i=n.getFirstSendingIndexFromAnswer(e)))for(var r=0;r<t.media.length;r++)if(t.media[r].type===e){i=r;break}if(i&&t.media.length>i){var s=t.media[i];Object.keys(f[e]).forEach(function(n){s.sources&&s.sources[n]&&console.warn("Replacing an existing SSRC."),s.sources||(s.sources={}),s.sources[n]=f[e][n]})}}}),"undefined"!=typeof t.groups&&t.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=i.join(" "),!0}),t.msidSemantic={semantic:"WMS",token:"*"};var A=s.write(t);return this.cache[e.type]=A,new RTCSessionDescription({type:e.type,sdp:A})}},{"./array-equals":17,"./transform":20}],20:[function(e,n,t){
/* Copyright @ 2015 Atlassian Pty Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var i=e("sdp-transform");t.write=function(e,n){return void 0!==e&&"undefined"!=typeof e.media&&Array.isArray(e.media)&&e.media.forEach(function(e){"undefined"!=typeof e.sources&&0!==Object.keys(e.sources).length&&(e.ssrcs=[],Object.keys(e.sources).forEach(function(n){var t=e.sources[n];Object.keys(t).forEach(function(i){e.ssrcs.push({id:n,attribute:i,value:t[i]})})}),delete e.sources),"undefined"!=typeof e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"undefined"!=typeof e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),void 0!==e&&"undefined"!=typeof e.groups&&Array.isArray(e.groups)&&e.groups.forEach(function(e){"undefined"!=typeof e.mids&&Array.isArray(e.mids)&&(e.mids=e.mids.join(" "))}),i.write(e,n)},t.parse=function(e){var n=i.parse(e);return void 0!==n&&"undefined"!=typeof n.media&&Array.isArray(n.media)&&n.media.forEach(function(e){"undefined"!=typeof e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources={},e.ssrcs.forEach(function(n){e.sources[n.id]||(e.sources[n.id]={}),e.sources[n.id][n.attribute]=n.value}),delete e.ssrcs),"undefined"!=typeof e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),void 0!==n&&"undefined"!=typeof n.groups&&Array.isArray(n.groups)&&n.groups.forEach(function(e){"string"==typeof e.mids&&(e.mids=e.mids.split(" "))}),n}},{"sdp-transform":14}],21:[function(n,t,i){
/*!
 * UAParser.js v0.7.21
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
!function(n,r){"use strict";var s="0.7.21",o="",a="?",d="function",c="undefined",u="object",f="string",p="major",l="model",m="name",h="type",g="vendor",w="version",v="architecture",y="console",b="mobile",S="tablet",k="smarttv",x="wearable",E="embedded",A={extend:function(e,n){var t={};for(var i in e)n[i]&&n[i].length%2==0?t[i]=n[i].concat(e[i]):t[i]=e[i];return t},has:function(e,n){return"string"==typeof e&&-1!==n.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===f?e.replace(/[^\d\.]/g,"").split(".")[0]:r},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},C={rgx:function(e,n){for(var t=0,i,s,o,a,c,f;t<n.length&&!c;){var p=n[t],l=n[t+1];for(i=s=0;i<p.length&&!c;)if(c=p[i++].exec(e))for(o=0;o<l.length;o++)f=c[++s],typeof(a=l[o])===u&&a.length>0?2==a.length?typeof a[1]==d?this[a[0]]=a[1].call(this,f):this[a[0]]=a[1]:3==a.length?typeof a[1]!==d||a[1].exec&&a[1].test?this[a[0]]=f?f.replace(a[1],a[2]):r:this[a[0]]=f?a[1].call(this,f,a[2]):r:4==a.length&&(this[a[0]]=f?a[3].call(this,f.replace(a[1],a[2])):r):this[a]=f||r;t+=2}},str:function(e,n){for(var t in n)if(typeof n[t]===u&&n[t].length>0){for(var i=0;i<n[t].length;i++)if(A.has(n[t][i],e))return t===a?r:t}else if(A.has(n[t],e))return t===a?r:t;return e}},T={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},L={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[m,w],[/(opios)[\/\s]+([\w\.]+)/i],[[m,"Opera Mini"],w],[/\s(opr)\/([\w\.]+)/i],[[m,"Opera"],w],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[m,w],[/(konqueror)\/([\w\.]+)/i],[[m,"Konqueror"],w],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[m,"IE"],w],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[m,"Edge"],w],[/(yabrowser)\/([\w\.]+)/i],[[m,"Yandex"],w],[/(Avast)\/([\w\.]+)/i],[[m,"Avast Secure Browser"],w],[/(AVG)\/([\w\.]+)/i],[[m,"AVG Secure Browser"],w],[/(puffin)\/([\w\.]+)/i],[[m,"Puffin"],w],[/(focus)\/([\w\.]+)/i],[[m,"Firefox Focus"],w],[/(opt)\/([\w\.]+)/i],[[m,"Opera Touch"],w],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[m,"UCBrowser"],w],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],w],[/(windowswechat qbcore)\/([\w\.]+)/i],[[m,"WeChat(Win) Desktop"],w],[/(micromessenger)\/([\w\.]+)/i],[[m,"WeChat"],w],[/(brave)\/([\w\.]+)/i],[[m,"Brave"],w],[/(qqbrowserlite)\/([\w\.]+)/i],[m,w],[/(QQ)\/([\d\.]+)/i],[m,w],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[m,w],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[m,w],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[m,w],[/(MetaSr)[\/\s]?([\w\.]+)/i],[m],[/(LBBROWSER)/i],[m],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[w,[m,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[w,[m,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[m,w],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[w,[m,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[m,/(.+)/,"$1 WebView"],w],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[m,/(.+(?:g|us))(.+)/,"$1 $2"],w],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[w,[m,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[m,"Sailfish Browser"],w],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[m,w],[/(dolfin)\/([\w\.]+)/i],[[m,"Dolphin"],w],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[m,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[m,"Chrome"],w],[/(coast)\/([\w\.]+)/i],[[m,"Opera Coast"],w],[/fxios\/([\w\.-]+)/i],[w,[m,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[w,[m,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[w,m],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[m,"GSA"],w],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[m,[w,C.str,T.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[m,w],[/(navigator|netscape)\/([\w\.-]+)/i],[[m,"Netscape"],w],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[m,w]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,A.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[v,/ower/,"",A.lowerize]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[v,A.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[l,g,[h,S]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[g,"Apple"],[h,S]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[g,"Apple"],[h,k]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[g,l,[h,S]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[l,[g,"Amazon"],[h,S]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[l,C.str,T.device.amazon.model],[g,"Amazon"],[h,b]],[/android.+aft([bms])\sbuild/i],[l,[g,"Amazon"],[h,k]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,g,[h,b]],[/\((ip[honed|\s\w*]+);/i],[l,[g,"Apple"],[h,b]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[g,l,[h,b]],[/\(bb10;\s(\w+)/i],[l,[g,"BlackBerry"],[h,b]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[l,[g,"Asus"],[h,S]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[g,"Sony"],[l,"Xperia Tablet"],[h,S]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[g,"Sony"],[h,b]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[g,l,[h,y]],[/android.+;\s(shield)\sbuild/i],[l,[g,"Nvidia"],[h,y]],[/(playstation\s[34portablevi]+)/i],[l,[g,"Sony"],[h,y]],[/(sprint\s(\w+))/i],[[g,C.str,T.device.sprint.vendor],[l,C.str,T.device.sprint.model],[h,b]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[g,[l,/_/g," "],[h,b]],[/(nexus\s9)/i],[l,[g,"HTC"],[h,S]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[l,[g,"Huawei"],[h,b]],[/android.+(bah2?-a?[lw]\d{2})/i],[l,[g,"Huawei"],[h,S]],[/(microsoft);\s(lumia[\s\w]+)/i],[g,l,[h,b]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[g,"Microsoft"],[h,y]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[g,"Microsoft"],[h,b]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[g,"Motorola"],[h,b]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[g,"Motorola"],[h,S]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[g,A.trim],[l,A.trim],[h,k]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[g,"Samsung"],[h,k]],[/\(dtv[\);].+(aquos)/i],[l,[g,"Sharp"],[h,k]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[g,"Samsung"],l,[h,S]],[/smart-tv.+(samsung)/i],[g,[h,k],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[g,"Samsung"],l,[h,b]],[/sie-(\w*)/i],[l,[g,"Siemens"],[h,b]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[g,"Nokia"],l,[h,b]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[l,[g,"Acer"],[h,S]],[/android.+([vl]k\-?\d{3})\s+build/i],[l,[g,"LG"],[h,S]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[g,"LG"],l,[h,S]],[/(lg) netcast\.tv/i],[g,l,[h,k]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[l,[g,"LG"],[h,b]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[g,l,[h,S]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[g,"Lenovo"],[h,S]],[/(lenovo)[_\s-]?([\w-]+)/i],[g,l,[h,b]],[/linux;.+((jolla));/i],[g,l,[h,b]],[/((pebble))app\/[\d\.]+\s/i],[g,l,[h,x]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[g,l,[h,b]],[/crkey/i],[[l,"Chromecast"],[g,"Google"],[h,k]],[/android.+;\s(glass)\s\d/i],[l,[g,"Google"],[h,x]],[/android.+;\s(pixel c)[\s)]/i],[l,[g,"Google"],[h,S]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[l,[g,"Google"],[h,b]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[l,/_/g," "],[g,"Xiaomi"],[h,b]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[l,/_/g," "],[g,"Xiaomi"],[h,S]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[l,[g,"Meizu"],[h,b]],[/(mz)-([\w-]{2,})/i],[[g,"Meizu"],l,[h,b]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[l,[g,"OnePlus"],[h,b]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[l,[g,"RCA"],[h,S]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[l,[g,"Dell"],[h,S]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[l,[g,"Verizon"],[h,S]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[g,"Barnes & Noble"],l,[h,S]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[l,[g,"NuVision"],[h,S]],[/android.+;\s(k88)\sbuild/i],[l,[g,"ZTE"],[h,S]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[l,[g,"Swiss"],[h,b]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[l,[g,"Swiss"],[h,S]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[l,[g,"Zeki"],[h,S]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[g,"Dragon Touch"],l,[h,S]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[l,[g,"Insignia"],[h,S]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[l,[g,"NextBook"],[h,S]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[g,"Voice"],l,[h,b]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[g,"LvTel"],l,[h,b]],[/android.+;\s(PH-1)\s/i],[l,[g,"Essential"],[h,b]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[l,[g,"Envizen"],[h,S]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[g,l,[h,S]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[l,[g,"MachSpeed"],[h,S]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[g,l,[h,S]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[l,[g,"Rotor"],[h,S]],[/android.+(KS(.+))\s+build/i],[l,[g,"Amazon"],[h,S]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[g,l,[h,S]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,A.lowerize],g,l],[/[\s\/\(](smart-?tv)[;\)]/i],[[h,k]],[/(android[\w\.\s\-]{0,9});.+build/i],[l,[g,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[w,[m,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[m,w],[/rv\:([\w\.]{1,9}).+(gecko)/i],[w,m]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[m,w],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[m,[w,C.str,T.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[m,"Windows"],[w,C.str,T.os.windows.version]],[/\((bb)(10);/i],[[m,"BlackBerry"],w],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[m,w],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[m,"Symbian"],w],[/\((series40);/i],[m],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[m,"Firefox OS"],w],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[m,w],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[m,"Chromium OS"],w],[/(sunos)\s?([\w\.\d]*)/i],[[m,"Solaris"],w],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[m,w],[/(haiku)\s(\w+)/i],[m,w],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[w,/_/g,"."],[m,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[m,"Mac OS"],[w,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[m,w]]},P=function(e,t){if("object"==typeof e&&(t=e,e=r),!(this instanceof P))return new P(e,t).getResult();var i=e||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:o),s=t?A.extend(L,t):L;return this.getBrowser=function(){var e={name:r,version:r};return C.rgx.call(e,i,s.browser),e.major=A.major(e.version),e},this.getCPU=function(){var e={architecture:r};return C.rgx.call(e,i,s.cpu),e},this.getDevice=function(){var e={vendor:r,model:r,type:r};return C.rgx.call(e,i,s.device),e},this.getEngine=function(){var e={name:r,version:r};return C.rgx.call(e,i,s.engine),e},this.getOS=function(){var e={name:r,version:r};return C.rgx.call(e,i,s.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};P.VERSION=s,P.BROWSER={NAME:m,MAJOR:p,VERSION:w},P.CPU={ARCHITECTURE:v},P.DEVICE={MODEL:l,VENDOR:g,TYPE:h,CONSOLE:y,MOBILE:b,SMARTTV:k,TABLET:S,WEARABLE:x,EMBEDDED:E},P.ENGINE={NAME:m,VERSION:w},P.OS={NAME:m,VERSION:w},typeof i!==c?(typeof t!==c&&t.exports&&(i=t.exports=P),i.UAParser=P):"function"==typeof e&&e.amd?e(function(){return P}):n&&(n.UAParser=P);var _=n&&(n.jQuery||n.Zepto);if(_&&!_.ua){var O=new P;_.ua=O.getResult(),_.ua.get=function(){return O.getUA()},_.ua.set=function(e){O.setUA(e);var n=O.getResult();for(var t in n)_.ua[t]=n[t]}}}("object"==typeof window?window:this)},{}],22:[function(e,n,t){function i(e,n){var t=n||0,i=r;return[i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],"-",i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]],i[e[t++]]].join("")}for(var r=[],s=0;s<256;++s)r[s]=(s+256).toString(16).substr(1);n.exports=i},{}],23:[function(e,n,t){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var r=new Uint8Array(16);n.exports=function e(){return i(r),r}}else{var s=new Array(16);n.exports=function e(){for(var e=0,n;e<16;e++)0==(3&e)&&(n=4294967296*Math.random()),s[e]=n>>>((3&e)<<3)&255;return s}}},{}],24:[function(e,n,t){function i(e,n,t){var i=n&&t||0;"string"==typeof e&&(n="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var a=0;a<16;++a)n[i+a]=o[a];return n||s(o)}var r=e("./lib/rng"),s=e("./lib/bytesToUuid");n.exports=i},{"./lib/bytesToUuid":22,"./lib/rng":23}],25:[function(e,n,t){function i(){}n.exports=i,i.mixin=function(e){var n=e.prototype||e;n.isWildEmitter=!0,n.on=function(e,n,t){this.callbacks=this.callbacks||{};var i=3===arguments.length,r=i?arguments[1]:undefined,s=i?arguments[2]:arguments[1];return s._groupName=r,(this.callbacks[e]=this.callbacks[e]||[]).push(s),this},n.once=function(e,n,t){function i(){r.off(e,i),a.apply(this,arguments)}var r=this,s=3===arguments.length,o=s?arguments[1]:undefined,a=s?arguments[2]:arguments[1];return this.on(e,o,i),this},n.releaseGroup=function(e){var n,t,i,r;for(n in this.callbacks=this.callbacks||{},this.callbacks)for(t=0,i=(r=this.callbacks[n]).length;t<i;t++)r[t]._groupName===e&&(r.splice(t,1),t--,i--);return this},n.off=function(e,n){this.callbacks=this.callbacks||{};var t=this.callbacks[e],i;return t?1===arguments.length?(delete this.callbacks[e],this):(-1!==(i=t.indexOf(n))&&(t.splice(i,1),0===t.length&&delete this.callbacks[e]),this):this},n.emit=function(e){this.callbacks=this.callbacks||{};var n=[].slice.call(arguments,1),t=this.callbacks[e],i=this.getWildcardCallbacks(e),r,s,o,a;if(t)for(r=0,s=(a=t.slice()).length;r<s&&a[r];++r)a[r].apply(this,n);if(i)for(s=i.length,r=0,s=(a=i.slice()).length;r<s&&a[r];++r)a[r].apply(this,[e].concat(n));return this},n.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var n,t,i=[];for(n in this.callbacks)t=n.split("*"),("*"===n||2===t.length&&e.slice(0,t[0].length)===t[0])&&(i=i.concat(this.callbacks[n]));return i}},i.mixin(i)},{}]},{},[2])(2)});